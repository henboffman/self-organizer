@inherits LayoutComponentBase
@implements IDisposable
@using SelfOrganizer.Core.Models
@using SelfOrganizer.Core.Interfaces
@inject IRepository<UserPreferences> PreferencesRepository

<div class="page">
    <div class="sidebar">
        <NavMenu />
    </div>

    <main>
        <div class="top-row px-4">
            <div class="me-auto">
                <SelfOrganizer.App.Components.FocusTimer.FocusTimerIndicator />
            </div>
            <button class="btn btn-outline-secondary btn-sm" @onclick="OpenGlobalSearch" title="Search (Cmd+Shift+Space)">
                <span class="oi oi-magnifying-glass"></span>
            </button>
            <a href="/capture" class="btn btn-outline-primary btn-sm">
                <span class="oi oi-plus"></span> Quick Capture
            </a>
            <a href="/settings" class="settings-link">Settings</a>
            <SelfOrganizer.App.Components.Shared.ThemeToggle />
        </div>

        <article class="content px-4">
            @Body
        </article>
    </main>
</div>

<SelfOrganizer.App.Components.Onboarding.OnboardingWizard
    IsVisible="_showOnboarding"
    OnCompleted="OnOnboardingCompleted" />

<SelfOrganizer.App.Components.Shared.GlobalSearch
    @bind-IsVisible="_showGlobalSearch"
    OnClose="OnGlobalSearchClosed" />
