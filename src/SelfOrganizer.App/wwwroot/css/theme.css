/* ===========================================
   Self Organizer - Theme System
   Inspired by Lifecycle Dashboard styling

   Typography: DM Sans, Space Grotesk, JetBrains Mono
   Color Palette: Purple accent with light backgrounds
   =========================================== */

/* ----------------------------------------
   Font Imports
   ---------------------------------------- */
@import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;500;600&family=Space+Grotesk:wght@500;600;700&display=swap');

/* ----------------------------------------
   CSS Custom Properties (Variables)
   Organized by category for maintainability
   ---------------------------------------- */

:root {
    /* === Font System === */
    --font-sans: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    --font-display: 'Space Grotesk', var(--font-sans);
    --font-mono: 'JetBrains Mono', 'SF Mono', Monaco, Consolas, monospace;

    /* Legacy variable mapping */
    --font-primary: var(--font-sans);
    --font-monospace: var(--font-mono);

    /* === Spacing Scale === */
    --space-xs: 0.25rem;
    --space-sm: 0.5rem;
    --space-md: 1rem;
    --space-lg: 1.5rem;
    --space-xl: 2rem;
    --space-2xl: 3rem;

    /* === Border Radius === */
    --radius-sm: 6px;
    --radius-md: 10px;
    --radius-lg: 14px;
    --radius-xl: 20px;
    --radius-full: 9999px;

    /* === Shadows === */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.07), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
    --shadow-glow: 0 0 20px rgba(167, 139, 250, 0.25);

    /* === Transitions === */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-normal: 250ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-bounce: 500ms cubic-bezier(0.34, 1.56, 0.64, 1);

    /* === Z-Index Scale === */
    --z-dropdown: 100;
    --z-sticky: 200;
    --z-fixed: 300;
    --z-modal-backdrop: 400;
    --z-modal: 500;
    --z-tooltip: 600;
}

/* ----------------------------------------
   Light Theme (Default)
   Purple accents with clean light backgrounds
   WCAG AA compliant color combinations
   ---------------------------------------- */
:root,
[data-theme="light"] {
    /* === Primary Purple Palette === */
    --color-purple: #a78bfa;
    --color-purple-hover: #c4b5fd;
    --color-purple-light: rgba(167, 139, 250, 0.15);
    --color-purple-glow: rgba(167, 139, 250, 0.25);
    --color-purple-deep: #8b5cf6;
    --color-accent-pink: #c084fc;
    --color-accent-warm: #f472b6;

    /* === Background Colors === */
    --bg-primary: #f8f8f9;
    --bg-secondary: #ffffff;
    --bg-tertiary: #f4f4f5;
    --bg-elevated: #ffffff;
    --bg-overlay: rgba(24, 24, 27, 0.5);

    /* === Text Colors (WCAG AA compliant) === */
    --text-primary: #18181b;
    --text-secondary: #3f3f46;
    --text-muted: #52525b;          /* Darkened from #71717a for 7:1+ contrast */
    --text-tertiary: #71717a;       /* For decorative/non-essential text only */
    --text-inverse: #ffffff;
    --text-on-primary: #ffffff;

    /* === Interactive Colors === */
    /* Using darker shades for 4.5:1+ contrast with white text on buttons */
    --color-primary: #7c3aed;
    --color-primary-hover: #6d28d9;
    --color-primary-active: #5b21b6;
    --color-primary-subtle: rgba(124, 58, 237, 0.15);
    --color-primary-text: #6d28d9;  /* For links - darker for contrast on white bg */

    --color-secondary: #6d28d9;
    --color-secondary-hover: #5b21b6;
    --color-secondary-active: #4c1d95;
    --color-secondary-subtle: rgba(109, 40, 217, 0.15);

    --color-accent: #8b5cf6;
    --color-accent-hover: #7c3aed;
    --color-accent-active: #6d28d9;
    --color-accent-subtle: rgba(139, 92, 246, 0.15);

    /* === Semantic Colors === */
    --color-success: #059669;
    --color-success-light: #10b981;
    --color-success-bg: rgba(5, 150, 105, 0.1);
    --color-success-border: rgba(5, 150, 105, 0.3);

    --color-warning: #d97706;
    --color-warning-light: #f59e0b;
    --color-warning-bg: rgba(217, 119, 6, 0.1);
    --color-warning-border: rgba(217, 119, 6, 0.3);

    --color-danger: #dc2626;
    --color-danger-light: #ef4444;
    --color-danger-bg: rgba(220, 38, 38, 0.1);
    --color-danger-border: rgba(220, 38, 38, 0.3);

    --color-info: #2563eb;
    --color-info-light: #3b82f6;
    --color-info-bg: rgba(37, 99, 235, 0.1);
    --color-info-border: rgba(37, 99, 235, 0.3);

    /* === Border Colors === */
    --border-default: #e4e4e7;
    --border-muted: #f4f4f5;
    --border-strong: #d4d4d8;
    --border-focus: var(--color-primary);

    /* === Sidebar Colors (Dark) === */
    --sidebar-bg: #16161a;
    --sidebar-bg-gradient: linear-gradient(180deg, #16161a 0%, #1e1e23 100%);
    --sidebar-text: #e4e4e7;
    --sidebar-text-active: #fafafa;
    --sidebar-hover-bg: rgba(167, 139, 250, 0.1);
    --sidebar-active-bg: rgba(167, 139, 250, 0.15);
    --sidebar-border: rgba(167, 139, 250, 0.1);

    /* === Input Colors === */
    --input-bg: #ffffff;
    --input-border: #e4e4e7;
    --input-border-focus: var(--color-primary);
    --input-placeholder: #71717a;   /* Darkened from #a1a1aa for 4.5:1 contrast */
    --input-disabled-bg: #f4f4f5;

    /* === Card Colors === */
    --card-bg: #ffffff;
    --card-border: #e4e4e7;
    --card-shadow: var(--shadow-sm);
    --card-hover-shadow: var(--shadow-md);

    /* === Priority Colors === */
    --priority-high: #dc2626;
    --priority-normal: #a78bfa;
    --priority-low: #71717a;

    /* === Status Colors === */
    --status-todo: #a78bfa;
    --status-in-progress: #f59e0b;
    --status-waiting: #8b5cf6;
    --status-completed: #059669;
    --status-someday: #71717a;

    /* === Focus Ring === */
    --focus-ring: 0 0 0 2px var(--bg-secondary), 0 0 0 4px var(--color-primary);
}

/* ----------------------------------------
   Dark Theme
   WCAG AA compliant color combinations
   ---------------------------------------- */
[data-theme="dark"] {
    /* === Background Colors === */
    --bg-primary: #0f0f11;
    --bg-secondary: #18181b;
    --bg-tertiary: #27272a;
    --bg-elevated: #27272a;
    --bg-overlay: rgba(0, 0, 0, 0.7);

    /* === Text Colors (WCAG AA compliant) === */
    --text-primary: #fafafa;
    --text-secondary: #d4d4d8;
    --text-muted: #a1a1aa;
    --text-tertiary: #71717a;       /* For decorative/non-essential text */
    --text-inverse: #18181b;
    --text-on-primary: #ffffff;

    /* === Interactive Colors === */
    /* Using darker shades for 4.5:1+ contrast with white text on buttons */
    --color-primary: #8b5cf6;
    --color-primary-hover: #7c3aed;
    --color-primary-active: #6d28d9;
    --color-primary-subtle: rgba(139, 92, 246, 0.2);
    --color-primary-text: #a78bfa;  /* For links on dark bg - lighter for visibility */

    --color-secondary: #7c3aed;
    --color-secondary-hover: #6d28d9;
    --color-secondary-active: #5b21b6;
    --color-secondary-subtle: rgba(124, 58, 237, 0.2);

    --color-accent: #a78bfa;
    --color-accent-hover: #8b5cf6;
    --color-accent-active: #7c3aed;
    --color-accent-subtle: rgba(167, 139, 250, 0.2);

    /* === Semantic Colors === */
    /* Using darker shades for badge backgrounds to ensure 4.5:1 contrast with white text */
    --color-success: #059669;
    --color-success-light: #10b981;
    --color-success-bg: rgba(5, 150, 105, 0.2);
    --color-success-border: rgba(5, 150, 105, 0.5);

    --color-warning: #d97706;
    --color-warning-light: #f59e0b;
    --color-warning-bg: rgba(217, 119, 6, 0.2);
    --color-warning-border: rgba(217, 119, 6, 0.5);

    --color-danger: #dc2626;
    --color-danger-light: #ef4444;
    --color-danger-bg: rgba(220, 38, 38, 0.2);
    --color-danger-border: rgba(220, 38, 38, 0.5);

    --color-info: #2563eb;
    --color-info-light: #3b82f6;
    --color-info-bg: rgba(37, 99, 235, 0.2);
    --color-info-border: rgba(37, 99, 235, 0.5);

    /* === Border Colors === */
    --border-default: #3f3f46;
    --border-muted: #27272a;
    --border-strong: #52525b;

    /* === Sidebar Colors === */
    --sidebar-bg: #0a0a0c;
    --sidebar-bg-gradient: linear-gradient(180deg, #0f0f11 0%, #09090b 100%);
    --sidebar-text: #e4e4e7;
    --sidebar-text-active: #fafafa;
    --sidebar-hover-bg: rgba(167, 139, 250, 0.1);
    --sidebar-active-bg: rgba(167, 139, 250, 0.2);
    --sidebar-border: rgba(167, 139, 250, 0.15);

    /* === Input Colors === */
    --input-bg: #27272a;
    --input-border: #3f3f46;
    --input-placeholder: #a1a1aa;   /* Lighter for 4.5:1 contrast on dark bg */
    --input-disabled-bg: #18181b;

    /* === Card Colors === */
    --card-bg: #18181b;
    --card-border: #3f3f46;
    --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    --card-hover-shadow: 0 10px 15px rgba(0, 0, 0, 0.4);

    /* === Priority Colors (brighter) === */
    --priority-high: #f87171;
    --priority-normal: #c4b5fd;
    --priority-low: #a1a1aa;

    /* === Status Colors (brighter) === */
    --status-todo: #c4b5fd;
    --status-in-progress: #fbbf24;
    --status-waiting: #a78bfa;
    --status-completed: #34d399;
    --status-someday: #a1a1aa;

    /* === Shadows (stronger for dark mode) === */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.5);
    --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.6);
    --shadow-glow: 0 0 20px rgba(196, 181, 253, 0.3);
}

/* ----------------------------------------
   System Preference Detection
   Respects prefers-color-scheme when no
   explicit theme is set
   ---------------------------------------- */
@media (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]) {
        /* Apply dark theme variables */
        --bg-primary: #0f0f11;
        --bg-secondary: #18181b;
        --bg-tertiary: #27272a;
        --bg-elevated: #27272a;
        --bg-overlay: rgba(0, 0, 0, 0.7);

        --text-primary: #fafafa;
        --text-secondary: #d4d4d8;
        --text-muted: #a1a1aa;
        --text-tertiary: #71717a;
        --text-inverse: #18181b;

        --color-primary: #8b5cf6;
        --color-primary-hover: #7c3aed;
        --color-primary-active: #6d28d9;
        --color-primary-subtle: rgba(139, 92, 246, 0.2);

        --color-secondary: #7c3aed;
        --color-secondary-hover: #6d28d9;
        --color-secondary-active: #5b21b6;

        --color-accent: #a78bfa;
        --color-accent-hover: #8b5cf6;
        --color-accent-active: #7c3aed;

        --color-success: #059669;
        --color-success-bg: rgba(5, 150, 105, 0.2);
        --color-warning: #d97706;
        --color-warning-bg: rgba(217, 119, 6, 0.2);
        --color-danger: #dc2626;
        --color-danger-bg: rgba(220, 38, 38, 0.2);
        --color-info: #2563eb;
        --color-info-bg: rgba(37, 99, 235, 0.2);

        --border-default: #3f3f46;
        --border-muted: #27272a;
        --border-strong: #52525b;

        --sidebar-bg: #0a0a0c;
        --sidebar-bg-gradient: linear-gradient(180deg, #0f0f11 0%, #09090b 100%);
        --sidebar-text: #e4e4e7;
        --sidebar-text-active: #fafafa;
        --sidebar-hover-bg: rgba(167, 139, 250, 0.1);
        --sidebar-active-bg: rgba(167, 139, 250, 0.2);
        --sidebar-border: rgba(167, 139, 250, 0.15);

        --input-bg: #27272a;
        --input-border: #3f3f46;
        --input-placeholder: #a1a1aa;
        --input-disabled-bg: #18181b;

        --card-bg: #18181b;
        --card-border: #3f3f46;

        --priority-high: #f87171;
        --priority-normal: #c4b5fd;
        --priority-low: #a1a1aa;

        --status-completed: #34d399;

        --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
        --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4);
        --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.5);
    }
}

/* ----------------------------------------
   Reduced Motion
   Respects user preference for reduced motion
   ---------------------------------------- */
@media (prefers-reduced-motion: reduce) {
    :root {
        --transition-fast: 0s;
        --transition-normal: 0s;
        --transition-slow: 0s;
    }

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}
